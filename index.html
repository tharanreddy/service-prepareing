<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCar Service</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for icons (stars, etc.) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <!-- Language Selection Screen -->
    <div id="language-selection-screen" class="screen">
        <div class="lang-container">
            <h2>Select Your Language</h2>
            <button class="lang-btn" data-lang="en">English</button>
            <button class="lang-btn" data-lang="hi">हिंदी (Hindi)</button>
            <button class="lang-btn" data-lang="mr">मराठी (Marathi)</button>
            <button class="lang-btn" data-lang="te">తెలుగు (Telugu)</button>
            <button class="lang-btn" data-lang="kn">ಕನ್ನಡ (Kannada)</button>
        </div>
    </div>

    <!-- Customer Authentication Screen -->
    <div id="customer-auth-screen" class="screen auth-screen">
        <div class="auth-container">
            <div class="auth-toggle">
                <button class="toggle-btn active" onclick="showCustomerAuth('login')">Login</button>
                <button class="toggle-btn" onclick="showCustomerAuth('register')">Register</button>
            </div>

            <!-- Customer Login Form -->
            <form id="customerLoginForm" class="auth-form">
                <h2>Customer Login</h2>
                <div class="input-group">
                    <label for="customerLoginEmail">Email:</label>
                    <input type="email" id="customerLoginEmail" required value="customer@example.com">
                </div>
                <div class="input-group">
                    <label for="customerLoginPassword">Password:</label>
                    <input type="password" id="customerLoginPassword" required value="password">
                </div>
                <button type="submit" class="btn">Login</button>
                <p class="auth-link" onclick="forgotPassword('customer')">Forgot Password?</p>
                <div class="divider">OR</div>
                <button type="button" class="btn btn-google" id="googleSignInBtn">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
                <p class="auth-switch">Are you a Service Center? <span onclick="showScreen('service-center-auth-screen')">Login Here</span></p>
            </form>

            <!-- Customer Registration Form (initially hidden) -->
            <form id="customerRegisterForm" class="auth-form" style="display:none;">
                <h2>Customer Register</h2>
                <div class="input-group">
                    <label for="customerRegisterName">Name:</label>
                    <input type="text" id="customerRegisterName" required>
                </div>
                <div class="input-group">
                    <label for="customerRegisterEmail">Email:</label>
                    <input type="email" id="customerRegisterEmail" required>
                </div>
                <div class="input-group">
                    <label for="customerRegisterPassword">Password:</label>
                    <input type="password" id="customerRegisterPassword" required>
                </div>
                <button type="submit" class="btn">Register</button>
                <p class="auth-switch">Already have an account? <span onclick="showCustomerAuth('login')">Login</span></p>
            </form>
        </div>
    </div>

    <!-- Service Center Authentication Screen -->
    <div id="service-center-auth-screen" class="screen auth-screen" style="display:none;">
        <div class="auth-container">
            <h2>Service Center Login</h2>
            <form id="serviceCenterLoginForm" class="auth-form">
                <div class="input-group">
                    <label for="centerLoginEmail">Email:</label>
                    <input type="email" id="centerLoginEmail" required value="center@example.com">
                </div>
                <div class="input-group">
                    <label for="centerLoginPassword">Password:</label>
                    <input type="password" id="centerLoginPassword" required value="password">
                </div>
                <button type="submit" class="btn">Login</button>
                <p class="auth-link" onclick="forgotPassword('serviceCenter')">Forgot Password?</p>
                <p class="auth-switch">Are you a Customer? <span onclick="showScreen('customer-auth-screen')">Login Here</span></p>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" style="display:none;">
        <nav class="navbar">
            <div class="logo">
                <img src="https://via.placeholder.com/40x40?text=QC" alt="QuickCar Logo">
                QuickCar
            </div>
            <ul class="nav-links">
                <li class="customer-nav-item"><a href="#home-section" class="nav-link active" data-translate="nav_home">Home</a></li>
                <li class="customer-nav-item"><a href="#book-service-section" class="nav-link" data-translate="nav_book_service">Book Service</a></li>
                <li class="customer-nav-item"><a href="#payment-section" class="nav-link" data-translate="nav_payments">Payments</a></li>
                <li class="customer-nav-item"><a href="#feedback-section" class="nav-link" data-translate="nav_feedback">Feedback</a></li>
                <li class="customer-nav-item"><a href="#contact-section" class="nav-link" data-translate="nav_contact">Contact Us</a></li>
                <li class="customer-nav-item"><a href="#profile-section" class="nav-link" data-translate="nav_profile">Profile</a></li>
                <li class="customer-nav-item"><a href="#chat-section" class="nav-link" data-translate="nav_chat">Chat</a></li>
            </ul>
            <button id="logoutBtn" class="btn logout-button">Logout</button>
        </nav>

        <main class="content">
            <!-- Home Section -->
            <section id="home-section" class="content-section active">
                <div class="hero-section">
                    <h1 data-translate="hero_heading">Experience Hassle-Free Car Servicing!</h1>
                    <p data-translate="hero_subheading">From pickup to delivery, we make car maintenance easy and transparent. Quick, reliable, and just a tap away.</p>
                    <button class="btn" onclick="showContentSection('book-service-section')" data-translate="book_now_cta">Book Your Service Now</button>
                </div>

                <div class="features-section">
                    <h2>Our Key Features</h2>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <i class="fas fa-calendar-check"></i>
                            <h3>Easy Booking</h3>
                            <p>Schedule your service online in minutes.</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-truck-pickup"></i>
                            <h3>Free Pickup & Drop</h3>
                            <p>We pick up your car from your location and deliver it back.</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-chart-line"></i>
                            <h3>Transparent Pricing</h3>
                            <p>No hidden costs, clear breakdown of all charges.</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-headset"></i>
                            <h3>24/7 Support</h3>
                            <p>Get assistance anytime, anywhere.</p>
                        </div>
                    </div>
                </div>

                <div class="testimonials-section">
                    <h2>What Our Customers Say</h2>
                    <ul id="testimonialList">
                        <!-- Testimonials will be loaded here dynamically -->
                        <li id="noTestimonialsMessage" class="empty-message">No testimonials yet. Be the first to leave feedback!</li>
                    </ul>
                </div>
            </section>

            <!-- Book Service Section -->
            <section id="book-service-section" class="content-section">
                <h2>Book a Service</h2>
                <form id="serviceBookingForm" class="service-form">
                    <div class="input-group">
                        <label for="customerName">Your Name:</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="input-group">
                        <label for="customerContact">Your Contact Number:</label>
                        <input type="tel" id="customerContact" pattern="[0-9]{10}" placeholder="e.g., 9876543210" required>
                    </div>
                    <div class="input-group">
                        <label for="customerAddress">Your Address:</label>
                        <textarea id="customerAddress" rows="3" required></textarea>
                    </div>
                    <div class="input-group">
                        <label for="carModel">Car Model:</label>
                        <input type="text" id="carModel" placeholder="e.g., Maruti Suzuki Swift" required>
                    </div>
                    <div class="input-group">
                        <label for="serviceType">Service Type:</label>
                        <select id="serviceType" required>
                            <option value="">-- Select Service --</option>
                            <option value="Basic Service">Basic Service</option>
                            <option value="Full Service">Full Service</option>
                            <option value="Engine Repair">Engine Repair</option>
                            <option value="Wheel Alignment">Wheel Alignment</option>
                            <option value="Car Wash">Car Wash</option>
                            <option value="Denting & Painting">Denting & Painting</option>
                            <option value="Other">Other (Please specify)</option>
                        </select>
                    </div>
                    <div id="otherServiceTypeGroup" class="input-group" style="display:none;">
                        <label for="otherServiceType">Specify Other Service:</label>
                        <input type="text" id="otherServiceType">
                    </div>
                    <div class="input-group">
                        <label for="preferredDate">Preferred Date:</label>
                        <input type="date" id="preferredDate" required>
                    </div>
                    <div class="input-group">
                        <label for="preferredTime">Preferred Time:</label>
                        <input type="time" id="preferredTime" required>
                    </div>
                    <button type="submit" class="btn">Book Now</button>
                </form>
            </section>

            <!-- Payments Section -->
            <section id="payment-section" class="content-section">
                <h2>Make a Payment</h2>
                <div class="payment-summary">
                    <p><strong>Service ID:</strong> <span id="paymentServiceId">N/A</span></p>
                    <p><strong>Customer Name:</strong> <span id="paymentCustomerName">N/A</span></p>
                    <p><strong>Service Type:</strong> <span id="paymentServiceType">N/A</span></p>
                    <p><strong>Amount Due:</strong> <span id="paymentAmountDue">₹0.00</span></p>
                </div>
                <form id="paymentForm" class="payment-form">
                    <div class="input-group">
                        <label for="paymentMethod">Payment Method:</label>
                        <select id="paymentMethod" onchange="togglePaymentFields()" required>
                            <option value="">-- Select Method --</option>
                            <option value="cash">Cash on Delivery</option>
                            <option value="online">Online Payment (UPI/Mobile)</option>
                        </select>
                    </div>
                    <div id="onlinePaymentFields" style="display:none;">
                        <div class="input-group">
                            <label for="customerMobileNumber">Mobile Number (Optional):</label>
                            <input type="tel" id="customerMobileNumber" pattern="[0-9]{10}" placeholder="Enter 10-digit number">
                        </div>
                        <div class="input-group">
                            <label for="customerUpiId">UPI ID (Optional):</label>
                            <input type="text" id="customerUpiId" placeholder="e.g., yourname@bankupi">
                        </div>
                        <p class="info-text">Please enter either Mobile Number or UPI ID.</p>
                    </div>
                    <button type="submit" class="btn">Pay Now</button>
                </form>
                <div id="paymentStatus" class="message-box"></div>
            </section>

            <!-- Feedback Section -->
            <section id="feedback-section" class="content-section">
                <h2>Leave Your Feedback</h2>
                <form id="feedbackForm" class="feedback-form">
                    <div class="input-group">
                        <label for="serviceIdFeedback">Service ID:</label>
                        <input type="text" id="serviceIdFeedback" readonly required>
                    </div>
                    <div class="input-group">
                        <label>Your Rating:</label>
                        <div id="starRating" class="star-rating">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="feedbackMessage">Your Message:</label>
                        <textarea id="feedbackMessage" rows="5" placeholder="Share your experience..." required></textarea>
                    </div>
                    <button type="submit" class="btn">Submit Feedback</button>
                </form>
            </section>

            <!-- Contact Us Section -->
            <section id="contact-section" class="content-section">
                <h2>Contact Us</h2>
                <div class="contact-info">
                    <p><i class="fas fa-map-marker-alt"></i> <strong>Address:</strong> 456 Speed Avenue, Auto City, India</p>
                    <p><i class="fas fa-phone"></i> <strong>Phone:</strong> +91 98765 43210</p>
                    <p><i class="fas fa-envelope"></i> <strong>Email:</strong> support@quickcar.com</p>
                    <p><i class="fas fa-clock"></i> <strong>Hours:</strong> Mon - Sat: 9 AM - 7 PM, Sunday: Closed</p>
                </div>
                <form id="contactForm" class="contact-form">
                    <div class="input-group">
                        <label for="contactName">Your Name:</label>
                        <input type="text" id="contactName" required>
                    </div>
                    <div class="input-group">
                        <label for="contactEmail">Your Email:</label>
                        <input type="email" id="contactEmail" required>
                    </div>
                    <div class="input-group">
                        <label for="contactMessage">Your Message:</label>
                        <textarea id="contactMessage" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn">Send Message</button>
                </form>
            </section>

            <!-- Profile Section -->
            <section id="profile-section" class="content-section">
                <h2>My Profile</h2>
                <form id="profileForm" class="profile-form">
                    <div class="input-group">
                        <label for="profileName">Name:</label>
                        <input type="text" id="profileName" required>
                    </div>
                    <div class="input-group">
                        <label for="profileEmail">Email:</label>
                        <input type="email" id="profileEmail" required>
                    </div>
                    <div class="input-group">
                        <label for="profileMobile">Mobile:</label>
                        <input type="tel" id="profileMobile" pattern="[0-9]{10}" required>
                    </div>
                    <div class="input-group">
                        <label for="profileAddress">Address:</label>
                        <textarea id="profileAddress" rows="3" required></textarea>
                    </div>
                    <h3>Car Details</h3>
                    <div class="input-group">
                        <label for="profileCarMake">Car Make:</label>
                        <input type="text" id="profileCarMake" placeholder="e.g., Toyota">
                    </div>
                    <div class="input-group">
                        <label for="profileCarModel">Car Model:</label>
                        <input type="text" id="profileCarModel" placeholder="e.g., Camry">
                    </div>
                    <div class="input-group">
                        <label for="profileCarYear">Car Year:</label>
                        <input type="number" id="profileCarYear" placeholder="e.g., 2020" min="1900" max="2099">
                    </div>
                    <div class="input-group">
                        <label for="profileLicensePlate">License Plate:</label>
                        <input type="text" id="profileLicensePlate" placeholder="e.g., MH12AB1234">
                    </div>
                    <button type="submit" class="btn">Update Profile</button>
                </form>
            </section>

            <!-- Chat Section -->
            <section id="chat-section" class="content-section">
                <h2>Chat with Service Center</h2>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message received">
                            <p>Service Center: Hello! How can we help you today?</p>
                        </div>
                        <!-- More messages will be appended here -->
                    </div>
                    <div class="chat-input-group">
                        <input type="text" id="chatInput" placeholder="Type your message...">
                        <button class="btn" id="chatSendBtn">Send</button>
                    </div>
                </div>
            </section>

            <!-- Service Center Dashboard (hidden for customers) -->
            <section id="service-center-dashboard" class="content-section">
                <h2>Service Center Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Pending Service Requests</h3>
                        <ul id="serviceRequestsList">
                            <!-- Service requests will be dynamically added here -->
                            <li id="noRequestsMessage" class="empty-message">No pending service requests.</li>
                        </ul>
                    </div>
                    <div class="dashboard-card">
                        <h3>Customer Feedback</h3>
                        <ul id="customerFeedbackList">
                            <!-- Customer feedback will be dynamically added here -->
                            <li id="noFeedbackMessage" class="empty-message">No customer feedback yet.</li>
                        </ul>
                    </div>
                    <div class="dashboard-card">
                        <h3>Payment History</h3>
                        <ul id="paymentHistoryList">
                            <!-- Payment history will be dynamically added here -->
                            <li id="noPaymentHistoryMessage" class="empty-message">No payment history yet.</li>
                        </ul>
                    </div>
                    <div class="dashboard-card points-card">
                        <h3>Loyalty Points Balance</h3>
                        <p id="centerPointsBalance">0 points</p>
                        <button class="btn btn-secondary" onclick="convertCenterPoints()">Convert Points to Cash</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Custom Message Box for notifications -->
    <div id="customMessageBox" class="custom-message-box"></div>

    <!-- Firebase v9+ Modular SDKs -->
    <script type="module">
      // Import the functions from Firebase Modular SDK
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
      import { getDatabase } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

      // Your Firebase Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDgGaOi-lNe9vNg72fNag1C6hioB2qqnMU", // <-- REPLACE THIS
        authDomain: "service-prepareing.firebaseapp.com", // <-- REPLACE THIS
        projectId: "service-prepareing", // <-- REPLACE THIS
        databaseURL: "https://service-prepareing-default-rtdb.firebaseio.com", // <-- REPLACE THIS
        storageBucket: "service-prepareing.firebasestorage.app", // <-- REPLACE THIS
        messagingSenderId: "295345065007", // <-- REPLACE THIS
        appId: "1:295345065007:web:0eb9463c2f0b73ff4b4ada", // <-- REPLACE THIS
        measurementId: "G-W68Y5N8TLD" // <-- REPLACE THIS (Optional)
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      // Expose auth and database instances globally so script.js can access them
      window.firebaseAuth = getAuth(app);
      window.firebaseDB = getDatabase(app);

      console.log("Firebase v9+ Modular SDK initialized in index.html.");
    </script>

    <!-- Your custom JavaScript file -->
    <!-- Ensure this is also a module to use import/export syntax -->
    <script type="module" src="script.js"></script>
    <script src="quickcar-app-logic.js"></script>


</body>
</html>
