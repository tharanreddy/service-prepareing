<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Service App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getDatabase } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
        // Import Analytics if you want to use it
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDgGaOi-lNe9vNg72fNag1C6hioB2qqnMU", // Replace with your actual API Key
            authDomain: "service-prepareing.firebaseapp.com",
            projectId: "service-prepareing",
            storageBucket: "service-prepareing.firebasestorage.app",
            messagingSenderId: "295345065007",
            appId: "1:295345065007:web:0eb9463c2f0b73ff4b4ada",
            measurementId: "G-W68Y5N8TLD",
            databaseURL: "https://service-prepareing-default-rtdb.firebaseio.com/" // Ensure this is correct for Realtime DB
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);
        const analytics = getAnalytics(app);

        // Expose Firebase instances globally for script.js
        window.firebaseAuth = auth;
        window.firebaseDB = db;
        window.firebaseAnalytics = analytics;
    </script>
    <script type="module" src="script.js"></script>
</head>
<body>
    <div id="customMessageBox" class="custom-message-box"></div>

    <div id="customer-auth-screen" class="screen customer-auth-screen">
        <div class="auth-container">
            <div class="auth-toggle">
                <button class="toggle-btn active" onclick="showCustomerAuth('login')">Login</button>
                <button class="toggle-btn" onclick="showCustomerAuth('register')">Register</button>
            </div>

            <form id="loginForm" class="auth-form customer-login-form">
                <h2>Customer Login</h2>
                <input type="email" id="customerLoginEmail" placeholder="Email" required>
                <input type="password" id="customerLoginPassword" placeholder="Password" required>
                <button type="submit" class="btn">Login</button>
                <a href="#" class="forgot-password" onclick="forgotPassword('customer')">Forgot Password?</a>
                <p class="or-separator">OR</p>
                <button type="button" class="btn btn-google" id="googleSignInBtn">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
                <p class="role-switch">Are you a Service Center? <a href="#" onclick="showScreen('service-center-auth-screen')">Login here</a></p>
            </form>

            <form id="registerForm" class="auth-form customer-register-form" style="display: none;">
                <h2>Customer Register</h2>
                <input type="text" id="customerRegisterName" placeholder="Full Name" required>
                <input type="email" id="customerRegisterEmail" placeholder="Email" required>
                <input type="password" id="customerRegisterPassword" placeholder="Password" required>
                <button type="submit" class="btn">Register</button>
            </form>
        </div>
    </div>

    <div id="service-center-auth-screen" class="screen service-center-auth-screen" style="display: none;">
        <div class="auth-container">
            <form id="serviceCenterLoginForm" class="auth-form service-center-login-form">
                <h2>Service Center Login</h2>
                <input type="email" id="centerLoginEmail" placeholder="Email" required>
                <input type="password" id="centerLoginPassword" placeholder="Password" required>
                <button type="submit" class="btn">Login</button>
                <a href="#" class="forgot-password" onclick="forgotPassword('serviceCenter')">Forgot Password?</a>
                <p class="role-switch">Are you a Customer? <a href="#" onclick="showScreen('customer-auth-screen')">Login here</a></p>
            </form>
        </div>
    </div>

    <div id="app-container" class="app-container" style="display: none;">
        <aside class="sidebar">
            <div class="logo">CarCarePro</div>
            <nav class="main-nav">
                <ul>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#home-section" class="nav-link active">Home</a></li>
                    <li class="nav-item customer-nav-item"><a href="#book-service-section" class="nav-link">Book Service</a></li>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#payments-section" class="nav-link">Payments</a></li>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#feedback-section" class="nav-link">Feedback</a></li>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#contact-section" class="nav-link">Contact Us</a></li>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#profile-section" class="nav-link">Profile</a></li>
                    <li class="nav-item customer-nav-item service-center-nav-item"><a href="#chat-section" class="nav-link">Chat</a></li>
                    <li class="nav-item service-center-nav-item"><a href="#service-center-dashboard" class="nav-link">Dashboard</a></li>
                </ul>
            </nav>
            <div class="logout-section">
                <button id="logoutBtn" class="btn btn-logout">Logout</button>
            </div>
        </aside>

        <main class="content">
            <section id="home-section" class="content-section active">
                <div class="hero-section">
                    <h1>Experience Hassle-Free Car Servicing!</h1>
                    <p>From pickup to delivery, we make car maintenance easy and transparent. Quick, reliable, and just a tap away.</p>
                    <button class="btn btn-primary" onclick="showContentSection('book-service-section')">Book Your Service Now</button>
                </div>
                </section>

            <section id="book-service-section" class="content-section">
                <h2>Book Your Service</h2>
                <form id="serviceBookingForm" class="app-form">
                    <div class="form-group">
                        <label for="customerName">Your Name</label>
                        <input type="text" id="customerName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="customerContact">Contact Number</label>
                        <input type="tel" id="customerContact" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Pickup Address</label>
                        <textarea id="customerAddress" rows="3" placeholder="Enter your complete address for car pickup" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="carModel">Car Make & Model</label>
                        <input type="text" id="carModel" placeholder="e.g., Honda Civic, Toyota Camry" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceType">Select Service Type</label>
                        <select id="serviceType" required>
                            <option value="">-- Choose Service --</option>
                            <option value="General Service">General Service</option>
                            <option value="Oil Change">Oil Change</option>
                            <option value="Brake Inspection">Brake Inspection</option>
                            <option value="Tire Rotation">Tire Rotation</option>
                            <option value="Battery Check">Battery Check</option>
                            <option value="AC Service">AC Service</option>
                            <option value="Dent Removal">Dent Removal</option>
                            <option value="Painting">Painting</option>
                            <option value="Other">Other (Please Specify)</option>
                        </select>
                    </div>
                    <div id="otherServiceTypeGroup" class="form-group" style="display: none;">
                        <label for="otherServiceType">Specify Other Service</label>
                        <input type="text" id="otherServiceType" placeholder="e.g., Engine Repair, Wheel Alignment">
                    </div>
                    <div class="form-group">
                        <label for="preferredDate">Preferred Date</label>
                        <input type="date" id="preferredDate" required>
                    </div>
                    <div class="form-group">
                        <label for="preferredTime">Preferred Time</label>
                        <input type="time" id="preferredTime" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Request Service</button>
                </form>
            </section>

            <section id="payments-section" class="content-section">
                <h2>Payments</h2>
                <div class="payment-summary">
                    <h3>Service Due for Payment:</h3>
                    <p><strong>Service ID:</strong> <span id="paymentServiceId">N/A</span></p>
                    <p><strong>Customer Name:</strong> <span id="paymentCustomerName">N/A</span></p>
                    <p><strong>Service Type:</strong> <span id="paymentServiceType">N/A</span></p>
                    <p><strong>Amount Due:</strong> <span id="paymentAmountDue">₹0.00</span></p>
                </div>

                <form id="paymentForm" class="app-form">
                    <div class="form-group">
                        <label for="paymentMethod">Payment Method</label>
                        <select id="paymentMethod" required>
                            <option value="">-- Select --</option>
                            <option value="cash">Cash on Delivery/Pickup</option>
                            <option value="online">Online Payment (UPI/Netbanking)</option>
                        </select>
                    </div>
                    <div id="onlinePaymentFields" style="display: none;">
                        <div class="form-group">
                            <label for="customerMobileNumber">Your Mobile Number (for UPI/Payment Link)</label>
                            <input type="tel" id="customerMobileNumber" placeholder="e.g., 9876543210">
                        </div>
                        <div class="form-group">
                            <label for="customerUpiId">Your UPI ID (Optional)</label>
                            <input type="text" id="customerUpiId" placeholder="e.g., yourname@bank">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Process Payment</button>
                </form>

                <h3>Payment History</h3>
                <ul id="paymentHistoryList" class="data-list">
                    <li id="noPaymentHistoryMessage" class="empty-message" style="display: none;">No payment history found.</li>
                </ul>
            </section>

            <section id="feedback-section" class="content-section">
                <h2>Share Your Feedback</h2>
                <form id="feedbackForm" class="app-form">
                    <div class="form-group">
                        <label for="serviceIdFeedback">Service Request ID (Optional)</label>
                        <input type="text" id="serviceIdFeedback" placeholder="e.g., SVC12345">
                    </div>
                    <div class="form-group">
                        <label>Rate Your Experience</label>
                        <div class="star-rating" id="starRating">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="feedbackMessage">Your Comments</label>
                        <textarea id="feedbackMessage" rows="5" placeholder="Share your experience..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Feedback</button>
                </form>

                <h3>What Our Customers Say:</h3>
                <ul id="customerFeedbackList" class="data-list">
                    <li class="empty-message">No feedback submitted yet.</li>
                </ul>
            </section>

            <section id="contact-section" class="content-section">
                <h2>Contact Us</h2>
                <form id="contactForm" class="app-form">
                    <div class="form-group">
                        <label for="contactName">Your Name</label>
                        <input type="text" id="contactName" required>
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Your Email</label>
                        <input type="email" id="contactEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="contactSubject">Subject</label>
                        <input type="text" id="contactSubject" required>
                    </div>
                    <div class="form-group">
                        <label for="contactMessage">Your Message</label>
                        <textarea id="contactMessage" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Message</button>
                </form>

                <div class="contact-info">
                    <h3>Our Contact Details:</h3>
                    <p><strong>Email:</strong> support@carservice.com</p>
                    <p><strong>Phone:</strong> +91-1234567890</p>
                    <p><strong>Address:</strong> 123 Car Street, Auto City, State - 123456</p>
                </div>
            </section>

            <section id="profile-section" class="content-section">
                <h2>Your Profile</h2>
                <form id="profileForm" class="app-form">
                    <div class="form-group">
                        <label for="profileName">Full Name</label>
                        <input type="text" id="profileName" required>
                    </div>
                    <div class="form-group">
                        <label for="profileEmail">Email</label>
                        <input type="email" id="profileEmail" disabled> </div>
                    <div class="form-group">
                        <label for="profileMobile">Mobile Number</label>
                        <input type="tel" id="profileMobile" placeholder="+91-XXXXXXXXXX">
                    </div>
                    <div class="form-group">
                        <label for="profileAddress">Address</label>
                        <textarea id="profileAddress" rows="3"></textarea>
                    </div>
                    <h3>Car Details</h3>
                    <div class="form-group">
                        <label for="profileCarMake">Car Make</label>
                        <input type="text" id="profileCarMake" placeholder="e.g., Maruti, Honda">
                    </div>
                    <div class="form-group">
                        <label for="profileCarModel">Car Model</label>
                        <input type="text" id="profileCarModel" placeholder="e.g., Swift, City">
                    </div>
                    <div class="form-group">
                        <label for="profileCarYear">Manufacturing Year</label>
                        <input type="number" id="profileCarYear" min="1900" max="2099" step="1" placeholder="e.g., 2018">
                    </div>
                    <div class="form-group">
                        <label for="profileLicensePlate">License Plate Number</label>
                        <input type="text" id="profileLicensePlate" placeholder="e.g., MH12AB1234">
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </section>

            <section id="chat-section" class="content-section">
                <h2>Customer Support Chat</h2>
                <div class="chat-box">
                    <div id="chatMessages" class="chat-messages">
                        </div>
                    <div class="chat-input-area">
                        <input type="text" id="chatInput" placeholder="Type your message...">
                        <button id="chatSendBtn" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Send</button>
                    </div>
                </div>
            </section>

            <section id="service-center-dashboard" class="content-section">
                <h2>Service Center Dashboard</h2>

                <div class="dashboard-section">
                    <h3>Pending Service Requests</h3>
                    <ul id="serviceRequestsList" class="data-list">
                        <li id="noRequestsMessage" class="empty-message" style="display: none;">No pending service requests.</li>
                    </ul>
                </div>

                <div class="dashboard-section">
                    <h3>Recent Customer Feedback</h3>
                    <ul id="customerFeedbackListDashboard" class="data-list">
                        <li id="noFeedbackMessageDashboard" class="empty-message" style="display: none;">No customer feedback yet.</li>
                    </ul>
                </div>

                <div class="dashboard-section">
                    <h3>Payment Transactions</h3>
                    <ul id="paymentHistoryListDashboard" class="data-list">
                        <li id="noPaymentHistoryMessageDashboard" class="empty-message" style="display: none;">No payment transactions.</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
